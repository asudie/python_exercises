from bs4 import BeautifulSoup

with open('evilcorp.html', 'r') as file:
    content = file.read()

soup = BeautifulSoup(content, 'html.parser')

soup.title.string = "Evil Corp - Stealing your money every day"

name_tag = soup.find('span', class_='name')
pronoun_tag = name_tag.find('span', class_='pronoun')
full_name = pronoun_tag.get_text() + name_tag.get_text().replace(pronoun_tag.get_text(), '')

new_h1 = soup.new_tag('h1')
new_h1.string = f"{full_name}, you are hacked!"
soup.body.insert(0, new_h1)

script = soup.new_tag('script')
script.string = '''
    hacked = function() {
        alert('hacked');
    }
    window.addEventListener('load', 
        function() { 
            var f = document.querySelector("form");
            f.setAttribute("onsubmit", "hacked()");
        }, 
    false);
'''
soup.body.append(script)

link_tag = soup.find('a')
link_tag['href'] = "https://mrrobot.fandom.com/wiki/Fsociety"
link_tag.string = "Fsociety"

with open('evilcorp_hacked.html', 'w') as file:
    file.write(str(soup))

print("evilcorp_hacked.html created successfully!")
